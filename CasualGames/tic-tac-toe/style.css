:root{
  --bg:#0f1724;
  --card:#0b1220;
  --muted:#9aa4b2;
  --accent:#7c3aed;
  --x-color:#ff6b6b;
  --o-color:#4dd0e1;
  --glass: rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
html,body{height:100%;overflow:hidden}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.12), transparent),
              radial-gradient(900px 500px at 90% 90%, rgba(77,208,225,0.06), transparent),
              var(--bg);
  color:#e6eef8;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:0;
  min-height:100vh;
}
.app{
  width:100%;
  max-width:820px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:16px;
  padding:10px;
  box-shadow:0 8px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  /* Force the app to fit the viewport and avoid outer scrolling */
  height: calc(100vh - 16px);
  max-height: calc(100vh - 16px);
  overflow: hidden;
  display:flex;
  flex-direction:column;
}
.header{display:flex;flex-direction:column;gap:4px;padding:6px 8px}
.title{font-size:clamp(1rem,3.2vw,1.6rem);margin:0}
.subtitle{margin:0;color:var(--muted);font-size:clamp(0.75rem,2.2vw,0.9rem)}
.scoreboard{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:10px;background:var(--glass);margin:6px;flex-wrap:wrap}
.player{display:flex;align-items:center;gap:12px}
.avatar{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;font-weight:700;font-size:1.1rem}
.avatar.x{background:linear-gradient(180deg,var(--x-color),#ff4b4b);color:#fff}
.avatar.o{background:linear-gradient(180deg,var(--o-color),#1fb6c8);color:#042b30}
.meta{display:flex;flex-direction:column}
.name{font-size:0.85rem;color:var(--muted)}
.score{font-size:1.25rem;font-weight:700}
.controls{display:flex;flex-direction:column;align-items:center;gap:6px}
.control-row{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
.mode{display:inline-flex;align-items:center;gap:6px;color:var(--muted);font-size:0.9rem}
.btn{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer}
.btn:hover{border-color:rgba(255,255,255,0.12);color:#fff}

/* Focus outlines for accessibility */
button:focus, select:focus, input[type="radio"]:focus{outline:3px solid rgba(124,58,237,0.22);outline-offset:3px}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Popup styles */
.popup{position:fixed;inset:0;display:grid;place-items:center;background:rgba(2,6,23,0.6);opacity:0;pointer-events:none;transition:opacity 220ms ease}
.popup[aria-hidden="false"]{opacity:1;pointer-events:auto}
.popup-card{width:320px;max-width:90%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:20px;text-align:center;transform:translateY(12px) scale(0.98);opacity:0;transition:transform 260ms cubic-bezier(.2,.9,.3,1),opacity 220ms}
.popup[aria-hidden="false"] .popup-card{transform:translateY(0) scale(1);opacity:1}
.popup-icon{width:68px;height:68px;border-radius:50%;display:grid;place-items:center;margin:0 auto 8px;font-size:1.6rem;background:rgba(255,255,255,0.04);color:#fff}
.popup-message{font-size:1.1rem;margin-bottom:12px}
.popup-actions{display:flex;gap:10px;justify-content:center}

/* Difficulty select visible styling */
select#difficulty{background:#fff;color:#04121a;border-color:rgba(0,0,0,0.06);padding:8px 10px}
select#difficulty option{background:#fff;color:#04121a}

.controls .btn[title]{font-size:0.9rem}

/* Confetti canvas */
#confetti{position:fixed;inset:0;pointer-events:none;mix-blend-mode:screen}

.turn{font-size:0.9rem;color:var(--muted)}
.board-wrap{padding:6px;flex:1;display:flex;align-items:center;justify-content:center}
.board{display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(6px,1vmin,12px);width:min(520px,60vmin,calc(100% - 24px));aspect-ratio:1/1}
.cell{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));border-radius:10px;display:grid;place-items:center;font-size:clamp(14px,5vmin,36px);font-weight:800;color:#fff;cursor:pointer;transition:transform 160ms ease, box-shadow 160ms ease}
.cell:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(2,6,23,0.5)}
.cell.filled{cursor:default;transform:none;box-shadow:none}
.mark.x{color:var(--x-color);text-shadow:0 2px 12px rgba(255,107,107,0.12)}
.mark.o{color:var(--o-color);text-shadow:0 2px 12px rgba(77,208,225,0.08)}
.line{position:absolute;background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.06));height:3px;border-radius:2px;}


@media (max-width:600px){
  .app{padding:12px}
  .avatar{width:44px;height:44px}
  .cell{font-size:1.8rem}
}
